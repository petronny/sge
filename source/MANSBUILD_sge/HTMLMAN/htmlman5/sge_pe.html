<HTML>
<HEAD>
<TITLE>sge_pe.5</TITLE>
</HEAD>
<BODY>
<H1>sge_pe.5</H1>
<HR>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->

</PRE>
<H2>NAME</H2><PRE>
       sge_pe - Grid Engine parallel environment configuration file format


</PRE>
<H2>DESCRIPTION</H2><PRE>
       Parallel environments are parallel programming and runtime environments
       supporting the execution of shared memory or distributed memory
       parallelized applications. Parallel environments usually require some
       kind of setup to be operational before starting parallel applications.
       Examples of common parallel environments are OpenMP on shared memory
       multiprocessor systems, and Message Passing Interface (MPI) on shared
       memory or distributed systems.

       <I>sge</I><B>_</B><I>pe</I> allows for the definition of interfaces to arbitrary parallel
       environments.  Once a parallel environment is defined or modified with
       the <B>-ap</B> or <B>-mp</B> options to <B><A HREF="../htmlman1/qconf.html">qconf(1)</A></B> and linked with one or more queues
       via <I>pe</I><B>_</B><I>list</I> in <B><A HREF="../htmlman5/queue_conf.html">queue_conf(5)</A></B> the environment can be requested for a job
       via the <B>-pe</B> switch to <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B> together with a request for a numeric
       range of parallel processes to be allocated by the job. Additional <B>-l</B>
       options may be used to specify more detailed job requirements.

       Note, Grid Engine allows backslashes (\) be used to escape newline
       characters. The backslash and the newline are replaced with a space
       character before any interpretation.


</PRE>
<H2>FORMAT</H2><PRE>
       The format of a <I>sge</I><B>_</B><I>pe</I> file is defined as follows:

   <B>pe_name</B>
       The name of the parallel environment in the format for <I>pe</I><B>_</B><I>name</I> in
       <B><A HREF="../htmlman1/sge_types.html">sge_types(1)</A></B>.  To be used in the <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B> <B>-pe</B> switch.

   <B>slots</B>
       The total number of parallel processes allowed to run concurrently
       under the parallel environment.  Type is integer, valid values are 0 to
       9999999.

   <B>user_lists</B>
   <B>xuser_lists</B>
       A comma-separated list of user access list names (see <B><A HREF="../htmlman5/access_list.html">access_list(5)</A></B>).

       Each user contained in at least one of the <B>user_lists</B> access lists has
       access to the parallel environment. If the <B>user_lists</B> parameter is set
       to NONE (the default) any user has access if not explicitly excluded
       via the <B>xuser_lists</B> parameter.

       Each user contained in at least one of the <B>xuser_lists</B> access lists is
       not allowed to access the parallel environment. If the <B>xuser_lists</B>
       parameter is set to NONE (the default) any user has access.

       If a user is contained both in an access list in <B>xuser_lists</B> and
       <B>user_lists</B> the user is denied access to the parallel environment.

   <B>start_proc_args</B>
   <B>stop_proc_args</B>
       The command line respectively of a startup or shutdown procedure (an
       executable command plus possible arguments) for the parallel
       environment, or "none" for no procedure (typically for tightly
       integrated PEs).  An optional prefix "user@" specifies the username
       under which the procedure is to be started.

       The startup procedure is invoked by <B><A HREF="../htmlman8/sge_shepherd.html">sge_shepherd(8)</A></B> on the master node
       of the job prior to executing the job script. Its purpose is to setup
       the parallel environment according to its needs.  The shutdown
       procedure is invoked by <B><A HREF="../htmlman8/sge_shepherd.html">sge_shepherd(8)</A></B> after the job script has
       finished. Its purpose is to stop the parallel environment and to remove
       it from all participating systems.  The standard output of the
       procedure is redirected to the file <I>REQUEST</I>.po<I>JID</I> in the job's working
       directory (see <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B>), with <I>REQUEST</I> being the name of the job as
       displayed by <B><A HREF="../htmlman1/qstat.html">qstat(1)</A></B>, and <I>JID</I> being the job's identification number.
       Likewise, the standard error output is redirected to <I>REQUEST</I>.pe<I>JID</I>.

       The following special variables, expanded at runtime, can be used
       (besides any other strings which have to be interpreted by the start
       and stop procedures) to constitute a command line:

       <I>$pe</I><B>_</B><I>hostfile</I>
              The pathname of a file containing a detailed description of the
              layout of the parallel environment to be setup by the start-up
              procedure. Each line of the file refers to a host on which
              parallel processes are to be run. The first entry of each line
              denotes the hostname, the second entry the number of parallel
              processes to be run on the host, the third entry the name of the
              queue, and the fourth entry a multi-processor configuration (or
              "NONE").  If <B>-binding</B> <B>pe</B> is specified on job submission, the
              fourth column is the core binding specification as colon-
              separated socket-core pairs, like "0,0:0,1", meaning the first
              core on the first socket and the second core on the first socket
              can be used for binding.

       <I>$host</I>  The name of the host on which the startup or stop procedures are
              run.

       <I>$job</I><B>_</B><I>owner</I>
              The user name of the job owner.

       <I>$job</I><B>_</B><I>id</I>
              Grid Engine's unique job identification number.

       <I>$job</I><B>_</B><I>name</I>
              The name of the job.

       <I>$pe</I>    The name of the parallel environment in use.

       <I>$pe</I><B>_</B><I>slots</I>
              Number of slots granted for the job.

       <I>$processors</I>
              The <B>processors</B> string as contained in the queue configuration
              (see <B><A HREF="../htmlman5/queue_conf.html">queue_conf(5)</A></B>) of the master queue (the queue in which the
              startup and stop procedures are run).

       <I>$queue</I> The cluster queue of the master queue instance.

       The start and stop commands are run with the same environment setting
       as that of the job to be started afterwards (see <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B>).

   <B>allocation_rule</B>
       The allocation rule is interpreted by the scheduler thread and helps
       the scheduler to decide how to distribute parallel processes among the
       available machines. If, for instance, a parallel environment is built
       for shared memory applications only, all parallel processes have to be
       assigned to a single machine, no matter how many suitable machines are
       available.  If, however, the parallel environment follows the
       distributed memory paradigm, an even distribution of processes among
       machines may be favorable, as may packing processes onto the minimum
       number of machines.

       The current version of the scheduler only understands the following
       allocation rules:

       <B>&lt;int&gt;</B>:    An integer, fixing the number of processes per host. If it is
                 1, all processes have to reside on different hosts. If the
                 special name <B>$pe_slots</B> is used, the full range of processes
                 as specified with the <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B> <B>-pe</B> switch has to be allocated
                 on a single host (no matter what value belonging to the range
                 is finally chosen for the job to be allocated).

       <B>$fill_up</B>: Starting from the best suitable host/queue, all available
                 slots are allocated. Further hosts and queues are "filled up"
                 as long as a job still requires slots for parallel tasks.

       <B>$round_robin</B>:
                 From all suitable hosts, a single slot is allocated until all
                 tasks requested by the parallel job are dispatched. If more
                 tasks are requested than suitable hosts are found, allocation
                 starts again from the first host.  The allocation scheme
                 walks through suitable hosts in a most-suitable-first order.

   <B>control_slaves</B>
       This parameter can be set to TRUE or FALSE (the default). It indicates
       whether Grid Engine is the creator of the slave tasks of a parallel
       application via <B><A HREF="../htmlman8/sge_execd.html">sge_execd(8)</A></B> and <B><A HREF="../htmlman8/sge_shepherd.html">sge_shepherd(8)</A></B> and thus has full
       control over all processes in a parallel application, which enables
       capabilities such as resource limitation and correct accounting ("tight
       integration"). To gain control over the slave tasks of a parallel
       application, a sophisticated PE interface is required, which works
       closely together with Grid Engine facilities.  See, for instance, the
       <B>$SGE_ROOT/mpi</B> directory and the howto pages &lt;http://arc.liv.ac.uk/SGE/
       howto/#Tight%20Integration%20of%20Parallel%20Libraries&gt;.

       Please  set  the  control_slaves  parameter  to  false for all other PE
       interfaces.

   <B>job_is_first_task</B>
       The <B>job_is_first_task</B> parameter can be set to TRUE or FALSE. A value of
       TRUE  indicates that the Grid Engine job script already contains one of
       the tasks of the parallel application (the number of slots reserved for
       the  job  is the number of slots requested with the -pe switch).  FALSE
       indicates that the job script (and its child processes) is not part  of
       the  parallel  program (the number of slots reserved for the job is the
       number of slots requested with the -pe switch + 1).

       If  wallclock  accounting  is  used  (execd_params  ACCT_RESERVED_USAGE
       and/or  SHARETREE_RESERVED_USAGE set to TRUE) and <B>control_slaves</B> is set
       to FALSE, the <B>job_is_first_task</B> parameter influences the accounting for
       the  job:  A  value of TRUE means that accounting for CPU and requested
       memory gets multiplied by the number of slots requested  with  the  -pe
       switch.   FALSE  means  the  accounting  information gets multiplied by
       number of slots + 1.

   <B>urgency_slots</B>
       For pending jobs with a slot range PE request the number  of  slots  is
       not  determined.  This  setting specifies the method to be used by Grid
       Engine to assess the number of slots such jobs might finally get.

       The  assumed  slot  allocation  has  a  meaning  when  determining  the
       resource-request-based  priority  contribution for numeric resources as
       described in <B><A HREF="../htmlman5/sge_priority.html">sge_priority(5)</A></B> and is  displayed  when  <B><A HREF="../htmlman1/qstat.html">qstat(1)</A></B>  is  run
       without <B>-g</B> <B>t</B> option.

       The following methods are supported:

       <B>&lt;int&gt;</B>:    The  specified integer number is directly used as prospective
                 slot amount.

       <B>min</B>:      The slot range minimum is used as prospective slot amount. If
                 no lower bound is specified with the range, 1 is assumed.

       <B>max</B>:      The  slot  range  maximum is used as prospective slot amount.
                 If no upper bound is specified with the range,  the  absolute
                 maximum possible due to the PE's <B>slots</B> setting is assumed.

       <B>avg</B>:      The  average  of  all  numbers  occurring within the job's PE
                 range request is assumed.

   <B>accounting_summary</B>
       This parameter is only checked if <B>control_slaves</B> (see above) is set  to
       TRUE  and  thus  Grid  Engine  is  the  creator of the slave tasks of a
       parallel application via <B><A HREF="../htmlman8/sge_execd.html">sge_execd(8)</A></B>  and  <B><A HREF="../htmlman8/sge_shepherd.html">sge_shepherd(8)</A></B>.   In  this
       case,  accounting  information is available for every single slave task
       started by Grid Engine.

       The <B>accounting_summary</B> parameter can be set to TRUE or FALSE.  A  value
       of  TRUE  indicates  that only a single accounting record is written to
       the <B><A HREF="../htmlman5/accounting.html">accounting(5)</A></B> file, containing the accounting summary of the  whole
       job,  including  all  slave  tasks, while a value of FALSE indicates an
       individual <B><A HREF="../htmlman5/accounting.html">accounting(5)</A></B> record is written for  every  slave  task,  as
       well as for the master task.

       <B>Note:</B>     When     running     tightly     integrated     jobs     with
       <I>SHARETREE</I><B>_</B><I>RESERVED</I><B>_</B><I>USAGE</I> set, and  <I>accounting</I><B>_</B><I>summary</I>  enabled  in  the
       parallel  environment,  reserved  usage  will  only  be reported by the
       master task of the parallel job.  No per-parallel  task  usage  records
       will be sent from execd to qmaster, which can significantly reduce load
       on the qmaster when running large, tightly integrated parallel jobs.


</PRE>
<H2>RESTRICTIONS</H2><PRE>
       <B>Note</B> that the functionality of the  startup,  shutdown,  and  signaling
       procedures   remains  the  full  responsibility  of  the  administrator
       configuring the parallel environment.  Grid  Engine  will  just  invoke
       these  procedures  and evaluate their exit status. If the procedures do
       not perform their tasks properly, or if the parallel environment or the
       parallel  application  behave unexpectedly, Grid Engine has no means to
       detect this.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <B><A HREF="../htmlman1/sge_intro.html">sge_intro(1)</A></B>,  <B><A HREF="../htmlman1/sge__types.html">sge__types(1)</A></B>,  <B><A HREF="../htmlman1/qconf.html">qconf(1)</A></B>,  <B><A HREF="../htmlman1/qdel.html">qdel(1)</A></B>,  <B><A HREF="../htmlman1/qmod.html">qmod(1)</A></B>,   <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B>,
       <B><A HREF="../htmlman5/access_list.html">access_list(5)</A></B>, <B><A HREF="../htmlman8/sge_qmaster.html">sge_qmaster(8)</A></B>, <B><A HREF="../htmlman8/sge_shepherd.html">sge_shepherd(8)</A></B>.


</PRE>
<H2>COPYRIGHT</H2><PRE>
       See <B><A HREF="../htmlman1/sge_intro.html">sge_intro(1)</A></B> for a full statement of rights and permissions.



SGE 8.0.0                $Date: 2011-05-19 00:21:08 $                <B><A HREF="../htmlman5/SGE_PE.html">SGE_PE(5)</A></B>
</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
