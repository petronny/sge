<HTML>
<HEAD>
<TITLE>qmake.1</TITLE>
</HEAD>
<BODY>
<H1>qmake.1</H1>
<HR>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->

</PRE>
<H2>NAME</H2><PRE>
       qmake - distributed parallel make, scheduling by Grid Engine.


</PRE>
<H2>SYNTAX</H2><PRE>
       <B>qmake</B> [<I>options</I>] -- [<I>gmake</I> <I>options</I>]


</PRE>
<H2>DESCRIPTION</H2><PRE>
       <I>Qmake</I> is a parallel, distributed <B><A HREF="../htmlman1/make.html">make(1)</A></B> utility. Scheduling of the
       parallel <I>make</I> tasks is done by Grid Engine. It is based on <I>gmake</I> (GNU
       make), version 3.78.1. Both Grid Engine and <I>gmake</I> command line options
       can be specified. They are separated by "--".

       All Grid Engine options valid with <B><A HREF="../htmlman1/qsub.html">qsub(1)</A></B> or <B><A HREF="../htmlman1/qrsh.html">qrsh(1)</A></B> can be specified
       with <I>qmake</I>.  See <B><A HREF="../htmlman1/submit.html">submit(1)</A></B> for a description of all Grid Engine command
       line options.  The <B><A HREF="../htmlman1/make.html">make(1)</A></B> manual page describes the <I>gmake</I> command line
       syntax.

       The syntax of <I>qmake</I> makefiles corresponds to <I>gmake</I> and is described in
       the "GNU Make Manual".

       A typical qmake call will use the Grid Engine command line options <B>-cwd</B>
       to have a scheduled make started in the current working directory on
       the execution host, <B>-v</B> <B>PATH</B> if the Grid Engine environment is not set
       up in the user's .cshrc or .profile shell resource file and request
       slots in a parallel environment (see <B><A HREF="../htmlman5/sge_pe.html">sge_pe(5)</A></B>).

       If no resource request (Grid Engine command line option -l) is
       specified, qmake will use the environment variable SGE_ARCH to request
       the same architecture as the submit host for task execution.  If
       SGE_ARCH is set, the architecture specified in SGE_ARCH will be
       requested by inserting the option <B>-l</B> <B>arch=$SGE_ARCH</B> into the command
       line options.  If SGE_ARCH is not set, the make tasks can be executed
       on any available architecture.  As this is critical for typical make
       (compile) jobs, a warning will be output.

       <I>qmake</I> has two different modes for allocating Grid Engine resources for
       the parallel execution of tasks:

       1.     Allocation of resources using a parallel environment. If the -pe
              option is used on the qmake command line, a parallel job is
              scheduled by Grid Engine.  The make rules are executed as tasks
              within this parallel job.

       2.     Dynamic allocation of resources. If no parallel environment is
              requested when submitting a qmake job, each make rule will
              generate an individual Grid Engine qrsh job.  All resource
              requests given to qmake will be inherited by the jobs processing
              the make rules.

       In dynamic allocation mode, additional resource requests for individual
       rules can be specified by preceding the rule by the definition of an
       environment variable SGE_RREQ. The rule then takes the form
       SGE_RREQ="&lt;request&gt;" &lt;rule&gt;, e.g.  SGE_RREQ="-l lic=1" cc -c ...  If
       such makefile rules are executed in a make utility other than qmake,
       the environment variable SGE_RREQ will be set in the environment
       established for the rule's execution - presumably without any effect.


</PRE>
<H2>EXAMPLES</H2><PRE>
              qmake -cwd -v PATH -pe compiling 1-10 --

       will request between 1 and 10 slots in parallel environment
       "compiling".  If the SGE_ARCH environment variable is set to the
       machine architecture, a resource request will be inserted into the
       qmake command line to start the qmake job on the same architecture as
       the submit host. The <I>make</I> tasks will inherit the complete environment
       of the calling shell, and as as many parallel tasks will execute as
       slots have been granted by Grid Engine.

              qmake -l arch=sol-sparc -cwd -v PATH -- -j 4

       will submit each make rule as an individual qrsh job. A maximum of 4
       tasks will be processed in parallel.  The qmake job will be started on
       a machine of architecture sol-sparc, this resource request will also be
       inherited by the make tasks, i.e. all jobs created for the execution of
       make tasks will request the architecture sol-sparc.

       If the following Makefile is submitted with the above command line,
       additional resource requests will be made for individual rules: For the
       compile and link rules, compiler licenses (comp) and linker licenses
       (link) will be requested, in addition to the resource request made for
       the whole job (-l arch=sol-sparc) on the command line.

              all: test

              clean:
                   rm -f test main.o functions.o

              test: main.o functions.o
                   SGE_RREQ="-l link=1" ld -o test main.o functions.o

              main.o: main.c
                   SGE_RREQ="-l comp=1" cc -c -DALIASPATH=

              functions.o: functions.c
                   SGE_RREQ="-l comp=1" cc -c -DALIASPATH=


       The command line
              qmake -cwd -v PATH -l arch=sol-sparc64 -pe make 3 --

       will request 3 parallel <I>make</I> tasks to be executed on hosts of
       architecture "sol-sparc64". The submit may be done on a host of any
       architecture.

       The shell script

              #!/bin/sh
              qmake -inherit --

       can be submitted by

              qsub -cwd -v PATH -pe make 1-10 [further sge options] &lt;script&gt;

       <I>Qmake</I> will inherit the resources granted for the job submitted above
       under parallel environment "make".


</PRE>
<H2>ENVIRONMENTAL VARIABLES</H2><PRE>
       <B>SGE_ROOT</B>       Specifies the location of the Grid Engine standard
                      configuration files.

       <B>SGE_CELL</B>       If set, specifies the default Grid Engine cell. To
                      address a Grid Engine cell <I>qmake</I> uses (in the order of
                      precedence):

                             The name of the cell specified in the environment
                             variable SGE_CELL, if it is set.

                             The name of the default cell, i.e. <B>default</B>.


       <B>SGE_DEBUG_LEVEL</B>
                      If set, specifies that debug information should be
                      written to stderr. In addition the level of detail in
                      which debug information is generated is defined.

       <B>SGE_ARCH</B>       The architecture of the submit host. If this variable is
                      set in the submission environment, qmake will request
                      the given architecture for job execution (see
                      DESCRIPTION above).


</PRE>
<H2>KNOWN PROBLEMS</H2><PRE>
   <B>Slow</B> <B>NFS</B> <B>server</B>
       Very low file server performance may lead to problems on dependent
       files.

       Example: Host a compiles a.c to a.o, host b compiles b.c to b.o, host c
       shall link program c from a.o and b.o. In case of very bad NFS
       performance, host c might not yet see files a.o and b.o.

   <B>Multiple</B> <B>commands</B> <B>in</B> <B>one</B> <B>rule</B>
       If multiple commands are executed in one rule, the makefile has to
       ensure that they are handled as one command line.

       Example:

              libx.a:
                     cc -c x.c
                     ar ru libx.a x.o

       Building libx.a will fail if the commands are executed in parallel (and
       possibly on different hosts). Write the following instead:

              libx.a:
                     cc -c x.c ; ar ru libx.a x.o

       or

              libx.a:
                     cc -c x.c ; \
                     ar ru libx.a x.o


</PRE>
<H2>SEE ALSO</H2><PRE>
       <B><A HREF="../htmlman1/submit.html">submit(1)</A></B>, <B><A HREF="../htmlman5/sge_pe.html">sge_pe(5)</A></B>, as well as <B><A HREF="../htmlman1/make.html">make(1)</A></B> (GNU make manpage) and <I>The</I> <I>GNU</I>
       <I>Make</I> <I>Manual</I> in &lt;sge_root&gt;/3rd_party/qmake.


</PRE>
<H2>COPYRIGHT</H2><PRE>
       <I>Qmake</I> contains portions of GNU Make (<I>gmake</I>), which is the copyright of
       the Free Software Foundation, Inc., Boston, MA, and is protected by the
       GNU General Public License.
       See <B><A HREF="../htmlman1/sge_intro.html">sge_intro(1)</A></B> and the information provided in
       &lt;sge_root&gt;/3rd_party/qmake for a statement of further rights and
       permissions.



SGE 8.0.0                $Date: 2011-05-20 22:14:28 $                 <B><A HREF="../htmlman1/QMAKE.html">QMAKE(1)</A></B>
</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
